<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.chii.homemanagement.mapper.ItemImageMapper">

    <!-- 基础结果映射 -->
    <resultMap id="BaseResultMap" type="com.chii.homemanagement.entity.ItemImage">
        <id column="id" property="id"/>
        <result column="item_id" property="itemId"/>
        <result column="url" property="url"/>
        <result column="type" property="type"/>
        <result column="sort" property="sort"/>
        <result column="create_time" property="createTime"/>
    </resultMap>
    
    <!-- 查询指定物品的所有图片 -->
    <select id="findByItemId" resultMap="BaseResultMap">
        SELECT * FROM item_image 
        WHERE item_id = #{itemId}
        ORDER BY sort ASC, id ASC
    </select>
    
    <!-- 查询指定物品的指定类型图片 -->
    <select id="findByItemIdAndType" resultMap="BaseResultMap">
        SELECT * FROM item_image 
        WHERE item_id = #{itemId} AND type = #{type}
        ORDER BY sort ASC, id ASC
    </select>
    
    <!-- 删除指定物品的所有图片 -->
    <delete id="deleteByItemId">
        DELETE FROM item_image WHERE item_id = #{itemId}
    </delete>
    
</mapper> 